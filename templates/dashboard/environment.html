{% extends 'dashboard/base.html' %}

{% block content %}
<section class="page-header">
  <div>
    <h2>환경 가이드 (Environment)</h2>
    <p>실시간 온습도와 위험 가구를 기반으로 행동 지침을 제공합니다.</p>
  </div>
  <button class="ghost">온습도 새로고침</button>
</section>

<section class="grid two">
  <article class="card" data-animate>
    <div class="card-header">
      <h3>폭염/한파 특보</h3>
      <span class="chip danger">경보</span>
    </div>
    <div class="weather-banner">
      <div>
        <strong>{{ weather_summary.title }}</strong>
        <p>{{ weather_summary.detail }}</p>
      </div>
      <div class="temp">{{ weather_summary.temperature }}°C</div>
    </div>
    <ul class="risk-list">
      {% for home in risk_households %}
      <li>
        <div>
          <strong>{{ home.area }}</strong>
          <p>{{ home.address }}</p>
        </div>
        <span class="chip {{ home.risk_class }}">{{ home.risk_label }}</span>
      </li>
      {% endfor %}
    </ul>
  </article>

  <article class="card" data-animate>
    <div class="card-header">
      <h3>행동 가이드 송출</h3>
      <span class="chip">음성 안내</span>
    </div>
    <div class="broadcast">
      <div class="broadcast-preview">
        <p>{{ broadcast.current_message }}</p>
        <span>송출 가구: {{ broadcast.households }}곳</span>
      </div>
      <form class="broadcast-form">
        <label>
          <span>가이드 메시지</span>
          <textarea rows="3">창문을 열고 시원한 바람을 느껴보세요. 물을 한 컵 드세요.</textarea>
        </label>
        <label>
          <span>송출 대상</span>
          <select>
            <option>위험 가구 전체</option>
            <option>노송동</option>
            <option>완산동</option>
          </select>
        </label>
        <button class="primary" type="button">지금 송출</button>
      </form>
    </div>
    <div class="guide-list">
      {% for guide in broadcast.guides %}
      <div>
        <strong>{{ guide.title }}</strong>
        <p>{{ guide.detail }}</p>
      </div>
      {% endfor %}
    </div>
  </article>
</section>
{% endblock %}
